using System;
using System.Collections;
using System.Diagnostics;
using System.IO;
using System.IO.Compression;
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
using System.Security;
using System.Security.AccessControl;
using System.Security.Principal;
using System.Text;

// Token: 0x020000C0 RID: 192
[SecuritySafeCritical]
internal class c0000c0
{
	// Token: 0x060006CD RID: 1741 RVA: 0x00034348 File Offset: 0x00032548
	[MethodImpl(MethodImplOptions.NoInlining)]
	static c0000c0()
	{
		c0000c0.f000088 = new byte[]
		{
			145,
			1,
			77,
			100,
			166,
			105,
			51,
			55,
			172,
			114,
			78,
			44,
			8,
			151,
			77,
			103,
			150,
			130,
			110,
			102,
			45,
			196,
			26,
			173,
			83,
			190,
			119,
			222,
			23,
			184,
			227,
			182,
			29,
			55,
			74,
			108,
			152,
			141,
			32,
			240,
			62,
			109,
			200,
			149,
			155,
			57,
			162,
			53,
			244,
			248,
			25,
			215,
			192,
			53,
			22,
			204,
			229,
			158,
			16,
			231,
			240,
			83,
			32,
			242,
			142,
			150,
			14,
			208,
			76,
			224,
			205,
			8,
			98,
			124,
			40,
			191,
			251,
			131,
			17,
			26,
			27,
			65,
			233,
			29,
			159,
			12,
			244,
			231,
			33,
			125,
			133,
			248,
			125,
			55,
			0,
			233,
			76,
			212,
			7,
			5,
			42,
			208,
			232,
			20,
			43
		};
	}

	// Token: 0x060006CE RID: 1742 RVA: 0x00034370 File Offset: 0x00032570
	internal static string m00000f(string p0)
	{
		delegate0e6.f0000f9(c0000c0.f000089);
		string result;
		if (delegate0171.f0001c6(c0000c0.f000089, p0))
		{
			result = (string)delegate0172.f0001c7(c0000c0.f000089, p0);
		}
		else
		{
			StringBuilder p = new StringBuilder();
			for (int i = 0; i < p0.Length; i++)
			{
				delegate0105.f00012b(p, delegate0173.f0001c8((int)(p0[i] ^ (char)c0000c0.f000088[i % c0000c0.f000088.Length])));
			}
			delegate0174.f0001c9(c0000c0.f000089, p0, delegate0cd.f0000a6(p));
			result = delegate0cd.f0000a6(p);
		}
		return result;
	}

	// Token: 0x060006CF RID: 1743
	[DllImport("kernel32.dll", CharSet = CharSet.Ansi, ExactSpelling = true)]
	[MethodImpl(MethodImplOptions.ForwardRef)]
	private static extern IntPtr LoadLibraryA(string p0);

	// Token: 0x060006D0 RID: 1744
	[DllImport("kernel32.dll", CharSet = CharSet.Ansi, ExactSpelling = true)]
	[MethodImpl(MethodImplOptions.ForwardRef)]
	private static extern IntPtr GetProcAddress(IntPtr p0, string p1);

	// Token: 0x060006D1 RID: 1745
	[DllImport("AgileDotNetRT.dll", CharSet = CharSet.Ansi, ExactSpelling = true)]
	[MethodImpl(MethodImplOptions.ForwardRef)]
	private static extern int _Initialize(IntPtr p0);

	// Token: 0x060006D2 RID: 1746
	[DllImport("AgileDotNetRT64.dll", CharSet = CharSet.Ansi, ExactSpelling = true)]
	[MethodImpl(MethodImplOptions.ForwardRef)]
	private static extern int _Initialize64(IntPtr p0);

	// Token: 0x060006D3 RID: 1747
	[DllImport("AgileDotNetRT.dll", CharSet = CharSet.Ansi, ExactSpelling = true)]
	[MethodImpl(MethodImplOptions.ForwardRef)]
	private static extern void _AtExit();

	// Token: 0x060006D4 RID: 1748
	[DllImport("AgileDotNetRT64.dll", CharSet = CharSet.Ansi, EntryPoint = "_AtExit", ExactSpelling = true)]
	[MethodImpl(MethodImplOptions.ForwardRef)]
	private static extern void AgileDotNetRT64__AtExit();

	// Token: 0x060006D5 RID: 1749 RVA: 0x00034438 File Offset: 0x00032638
	internal static IntPtr Load()
	{
		delegate0e6.f0000f9(delegate013e.f00017d(typeof(c0000c0).TypeHandle));
		WindowsImpersonationContext windowsImpersonationContext = WindowsIdentity.Impersonate(IntPtr.Zero);
		Assembly assembly = delegate0155.f0001a2();
		string text;
		string p;
		if (delegate0169.f0001bd() == 4)
		{
			text = "997a1167-7bb0-44ff-b365-068a78fb7e77";
			p = "AgileDotNetRT";
		}
		else
		{
			text = "741fd376-58f5-42d1-99b8-479964e5844c";
			p = "AgileDotNetRT64";
		}
		Stream manifestResourceStream = assembly.GetManifestResourceStream(text);
		GZipStream input = new GZipStream(manifestResourceStream, CompressionMode.Decompress);
		BinaryReader p2 = new BinaryReader(input);
		byte[] array = delegate0145.f000187(p2, delegate0fc.f00011c(p2));
		string p3 = delegate0d5.f0000c8("{0}{1}\\", delegate0cb.f00009e(), text);
		delegate0d9.f0000d5(p3);
		string p4 = delegate0ff.f000122(p3, p, ".dll");
		if (!delegate0d2.f0000bf(p4))
		{
			FileStream p5 = delegate0135.f000172(p4);
			delegate0109.f000132(p5, array, 0, array.Length);
			delegate0c9.f00009b(p5);
			FileSystemAccessRule p6 = new FileSystemAccessRule(new SecurityIdentifier("S-1-1-0"), FileSystemRights.ReadAndExecute, AccessControlType.Allow);
			FileSecurity fileSecurity = delegate0175.f0001ca(p4);
			delegate0176.f0001cb(fileSecurity, p6);
			delegate0177.f0001cc(p4, fileSecurity);
		}
		return c0000c0.LoadLibraryA(p4);
	}

	// Token: 0x060006D6 RID: 1750 RVA: 0x000345A4 File Offset: 0x000327A4
	internal static int InitializeThroughDelegate(IntPtr p0)
	{
		IntPtr p = c0000c0.Load();
		IntPtr procAddress = c0000c0.GetProcAddress(p, "_Initialize");
		InitializeDelegate initializeDelegate = (InitializeDelegate)delegate0178.f0001cd(procAddress, delegate013e.f00017d(typeof(InitializeDelegate).TypeHandle));
		return initializeDelegate(p0);
	}

	// Token: 0x060006D7 RID: 1751 RVA: 0x000345EC File Offset: 0x000327EC
	internal static int InitializeThroughDelegate64(IntPtr p0)
	{
		IntPtr p = c0000c0.Load();
		IntPtr procAddress = c0000c0.GetProcAddress(p, "_Initialize64");
		InitializeDelegate initializeDelegate = (InitializeDelegate)delegate0178.f0001cd(procAddress, delegate013e.f00017d(typeof(InitializeDelegate).TypeHandle));
		return initializeDelegate(p0);
	}

	// Token: 0x060006D8 RID: 1752 RVA: 0x00034634 File Offset: 0x00032834
	internal static void ExitThroughDelegate()
	{
		IntPtr p = c0000c0.Load();
		IntPtr procAddress = c0000c0.GetProcAddress(p, "_AtExit");
		ExitDelegate exitDelegate = (ExitDelegate)delegate0178.f0001cd(procAddress, delegate013e.f00017d(typeof(ExitDelegate).TypeHandle));
		exitDelegate();
	}

	// Token: 0x060006D9 RID: 1753 RVA: 0x0003467C File Offset: 0x0003287C
	internal static void ExitThroughDelegate64()
	{
		IntPtr p = c0000c0.Load();
		IntPtr procAddress = c0000c0.GetProcAddress(p, "_AtExit64");
		ExitDelegate exitDelegate = (ExitDelegate)delegate0178.f0001cd(procAddress, delegate013e.f00017d(typeof(ExitDelegate).TypeHandle));
		exitDelegate();
	}

	// Token: 0x060006DA RID: 1754 RVA: 0x000346C4 File Offset: 0x000328C4
	internal static void DomainUnload(object p0, EventArgs p1)
	{
		if (delegate0169.f0001bd() == 4)
		{
			c0000c0.ExitThroughDelegate();
			return;
		}
		c0000c0.ExitThroughDelegate64();
	}

	// Token: 0x060006DB RID: 1755 RVA: 0x000346E0 File Offset: 0x000328E0
	internal static void Initialize()
	{
		if (!c0000c0.inited)
		{
			RuntimeMethodHandle runtimeMethodHandle = delegate017a.f0001cf(delegate0166.f0001b9(delegate0179.f0001ce(new StackTrace(), 0)));
			if (((delegate0169.f0001bd() != 4) ? c0000c0.InitializeThroughDelegate64(runtimeMethodHandle.Value) : c0000c0.InitializeThroughDelegate(runtimeMethodHandle.Value)) == 1)
			{
				delegate017b.f0001d0(delegate0cc.f0000a1(), new EventHandler(c0000c0.DomainUnload));
			}
			c0000c0.inited = true;
		}
	}

	// Token: 0x060006DC RID: 1756 RVA: 0x00034770 File Offset: 0x00032970
	internal static void PostInitialize()
	{
	}

	// Token: 0x040003D4 RID: 980
	private static byte[] f000088;

	// Token: 0x040003D5 RID: 981
	private static Hashtable f000089 = new Hashtable();

	// Token: 0x040003D6 RID: 982
	private static bool inited;

	// Token: 0x040003D7 RID: 983
	private static Assembly runtimeAssembly;
}
